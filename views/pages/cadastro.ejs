<div class="cadastro-container">
    <h2>Crie sua conta</h2>
    <p>Comece a organizar suas tarefas com facilidade.</p>

    <form id="cadastro-form">
        <input type="text" name="nome" placeholder="Nome completo" required />
        <input type="email" name="email" placeholder="E-mail" required />
        <input type="password" name="senha" placeholder="Senha" required />
        <input type="password" name="confirmar_senha" placeholder="Confirmar senha" required />
        <button type="submit" class="btn-cadastrar">Cadastrar</button>
    </form>

    <p class="switch-auth">Já tem uma conta? <a href="/login">Faça login</a></p>

    <script>
        document.getElementById('cadastro-form').addEventListener('submit', function (e) {
            e.preventDefault();
            fetch('/api/users', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    nome: this.nome.value,
                    email: this.email.value,
                    senha: this.senha.value,
                    confirmar_senha: this.confirmar_senha.value
                })
            })
                .then(res => res.json())
                .then(resp => {
                    if (resp.sucesso) {
                        window.location.href = '/login';
                    } else {
                        alert('Erro ao cadastrar!');
                    }
                });
        });
    </script>
</div>